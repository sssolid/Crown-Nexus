<!-- frontend/src/components/common/NotificationSystem.vue --><template><div class="notification-container"><v-snackbar v-for="notification in notifications" :key="notification.id" v-model="snackbarVisibility[notification.id]" :color="notification.type" :timeout="notification.timeout" :position="notification.position" :variant="getVariant(notification.type)" ><div class="d-flex align-center"><v-icon v-if="notification.type==='success'" icon="mdi-check-circle" class="mr-2"></v-icon><v-icon v-if="notification.type==='error'" icon="mdi-alert-circle" class="mr-2"></v-icon><v-icon v-if="notification.type==='warning'" icon="mdi-alert" class="mr-2"></v-icon><v-icon v-if="notification.type==='info'" icon="mdi-information" class="mr-2"></v-icon><span>{{ notification.message }}</span></div><template v-slot:actions><v-btn v-if="notification.closeable" icon="mdi-close" variant="text" @click="closeNotification(notification.id)" ></v-btn></template></v-snackbar></div></template><script lang="ts">import{defineComponent,ref,computed,watch,onMounted,onUnmounted}from 'vue';import{notificationService,Notification,NotificationType}from '@/utils/notification';export default defineComponent({name:'NotificationSystem',setup(){const snackbarVisibility=ref<Record<number,boolean>>({});const notifications=computed(()=>notificationService.getAll());watch(notifications,(newNotifications)=>{newNotifications.forEach(notification=>{if(snackbarVisibility.value[notification.id]===undefined){snackbarVisibility.value[notification.id]=true;}});Object.keys(snackbarVisibility.value).forEach(id=>{const numId=parseInt(id);if(!newNotifications.some(n=>n.id===numId)){delete snackbarVisibility.value[numId];}});},{deep:true});const closeNotification=(id:number)=>{snackbarVisibility.value[id]=false;setTimeout(()=>{notificationService.remove(id);},300);};const getVariant=(type:NotificationType)=>{switch(type){case NotificationType.SUCCESS:return 'elevated';case NotificationType.ERROR:return 'elevated';case NotificationType.WARNING:return 'tonal';case NotificationType.INFO:return 'flat';default:return 'elevated';}};return{notifications,snackbarVisibility,closeNotification,getVariant,};}});</script><style scoped>.notification-container{position:fixed;z-index:1000;pointer-events:none}.notification-container:deep(.v-snackbar__wrapper){pointer-events:auto}</style>