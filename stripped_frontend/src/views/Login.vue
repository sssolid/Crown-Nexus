<!-- frontend/src/views/Login.vue --><template><v-container fluid class="fill-height"><v-row align="center" justify="center"><v-col cols="12" sm="8" md="4" lg="4"><v-card class="elevation-12 rounded-lg"><v-card-item class="bg-primary"><v-card-title class="text-h5 text-white text-center py-4"><v-icon icon="mdi-car-cog" size="x-large" class="mb-2"></v-icon><div>Crown Nexus Login</div></v-card-title></v-card-item><v-card-text class="pa-6"><v-form @submit.prevent="login" ref="loginForm"><v-text-field v-model="username" label="Email" name="username" type="email" prepend-inner-icon="mdi-account" :rules="[rules.required, rules.email]" autocomplete="username" variant="outlined" color="primary" class="mb-3" ></v-text-field><v-text-field v-model="password" label="Password" name="password" prepend-inner-icon="mdi-lock" :type="showPassword ? 'text' : 'password'" :append-inner-icon="showPassword ? 'mdi-eye' : 'mdi-eye-off'" @click:append-inner="showPassword=!showPassword" :rules="[rules.required]" autocomplete="current-password" variant="outlined" color="primary" ></v-text-field><v-checkbox v-model="rememberMe" label="Remember me" color="primary" hide-details class="my-2" ></v-checkbox><v-alert v-if="authStore.error" type="error" variant="tonal" closable class="mt-4" > {{ authStore.error }} </v-alert></v-form></v-card-text><v-card-actions class="px-6 pb-6"><v-btn color="primary" @click="login" :loading="authStore.loading" block size="large" variant="elevated" > Login <v-icon icon="mdi-login" end></v-icon></v-btn></v-card-actions><v-card-text class="text-center pt-0"><a href="#" class="text-decoration-none text-caption"> Forgot your password? </a></v-card-text></v-card><div class="text-center mt-6 text-caption text-medium-emphasis"><p>For assistance, please contact your system administrator</p><p class="mt-2">&copy; {{ new Date().getFullYear() }} Crown Nexus</p></div></v-col></v-row></v-container></template><script lang="ts">import{defineComponent,ref,computed}from 'vue';import{useRouter}from 'vue-router';import{useAuthStore}from '@/stores/auth';export default defineComponent({name:'Login',setup(){const router=useRouter();const authStore=useAuthStore();const loginForm=ref<any>(null);const username=ref('');const password=ref('');const rememberMe=ref(true);const showPassword=ref(false);const rules={required:(v:string)=>!!v||'This field is required',email:(v:string)=>/.+@.+\..+/.test(v)||'E-mail must be valid',};const loading=computed(()=>authStore.loading);const login=async()=>{const valid=await loginForm.value?.validate();if(!valid.valid){return;}try{await authStore.login({username:username.value,password:password.value,rememberMe:rememberMe.value,});}catch(err){console.error('Login error:',err);}};return{authStore,loginForm,username,password,rememberMe,showPassword,rules,loading,login,};},});</script>